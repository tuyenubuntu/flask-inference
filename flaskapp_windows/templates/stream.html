<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stream</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdn.socket.io/4.1.3/socket.io.min.js"></script>
</head>
<body>
    <h1>Camera Stream</h1>
    <img src="{{ url_for('video') }}" alt="Camera Stream" id="video-stream">

    <!-- Buttons to control the stream -->
     <div class="button-row">  
        <button id="start-stream">Start Stream</button>
        <button id="stop-stream">Stop Stream</button>
        <button id="back-to-home">Back to Home</button>
     </div>

    <script>
        document.getElementById('start-stream').addEventListener('click', function () {
            fetch('/start_stream')
                .then(response => response.text())
                .then(data => {
                    alert(data);  // Show server response
                    // Switch to the video stream
                    const videoStream = document.getElementById('video-stream');
                    videoStream.src = "/video?" + new Date().getTime(); // Add a timestamp to prevent caching
                })
                .catch(error => console.error('Error starting stream:', error));
        });

        document.getElementById('stop-stream').addEventListener('click', function () {
            fetch('/stop_stream')
                .then(response => response.text())
                .then(data => {
                    alert(data);  // Show server response
                    // Switch back to the placeholder image
                    const videoStream = document.getElementById('video-stream');
                    videoStream.src = "\\static\\images\\nocap.png"; // Path to your placeholder image
                })
                .catch(error => console.error('Error stopping stream:', error));
        });



        document.getElementById('back-to-home').addEventListener('click', function () {
            window.location.href = '/';
        });
    </script>
</body>
</html>
